<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>五十音ボタン</title>
  <style>
    .kana-button {
      width: 40px;
      height: 40px;
      margin: 2px;
      font-size: 18px;
    }
    .yellow {
      background-color: yellow;
    }
    .green {
      background-color: lightgreen;
    }
    #copy-button {
      margin-top: 10px;
      padding: 6px 12px;
      font-size: 16px;
    }
  </style>
</head>
<body>
  <div id="button-container"></div>
  <br>
  <textarea id="output" rows="20" cols="50" readonly></textarea>
  <br>
  <button id="copy-button">クリップボードにコピー</button>

  <script>
    const kanaRows = [
      ["あ", "い", "う", "え", "お"],
      ["か", "き", "く", "け", "こ"],
      ["さ", "し", "す", "せ", "そ"],
      ["た", "ち", "つ", "て", "と"],
      ["な", "に", "ぬ", "ね", "の"],
      ["は", "ひ", "ふ", "へ", "ほ"],
      ["ま", "み", "む", "め", "も"],
      ["や", "", "ゆ", "", "よ"],
      ["ら", "り", "る", "れ", "ろ"],
      ["わ", "", "ん", "", "を"],
      ["が", "ぎ", "ぐ", "げ", "ご"],
      ["ざ", "じ", "ず", "ぜ", "ぞ"],
      ["だ", "ぢ", "づ", "で", "ど"],
      ["ば", "び", "ぶ", "べ", "ぼ"],
      ["ぱ", "ぴ", "ぷ", "ぺ", "ぽ"]
    ];

    const states = {}; // { kana: 0 | 1 | 2 }
    const output = document.getElementById("output");
    const container = document.getElementById("button-container");
    const copyButton = document.getElementById("copy-button");

    kanaRows.forEach(row => {
      const rowDiv = document.createElement("div");
      row.forEach(kana => {
        if (kana === "") {
          const spacer = document.createElement("span");
          spacer.style.display = "inline-block";
          spacer.style.width = "44px";
          rowDiv.appendChild(spacer);
          return;
        }
        const btn = document.createElement("button");
        btn.textContent = kana;
        btn.className = "kana-button";
        states[kana] = 0;

        btn.addEventListener("click", () => {
          states[kana] = (states[kana] + 1) % 3;
          btn.classList.remove("yellow", "green");
          if (states[kana] === 1) btn.classList.add("yellow");
          else if (states[kana] === 2) btn.classList.add("green");
          updateOutput();
        });

        rowDiv.appendChild(btn);
      });
      container.appendChild(rowDiv);
    });

    function updateOutput() {
      const lines = kanaRows.map(row => {
        return row.map(kana => {
          if (!kana || !states[kana]) return "";
          if (states[kana] === 1) return `${kana}-`;
          if (states[kana] === 2) return `${kana}+`;
          return "";
        }).filter(x => x !== "").join(" ");
      }).filter(line => line !== "");
      output.value = lines.join("\n");
    }

    copyButton.addEventListener("click", () => {
      output.select();
      document.execCommand("copy");
      alert("クリップボードにコピーしました");
    });
  </script>
</body>
</html>
